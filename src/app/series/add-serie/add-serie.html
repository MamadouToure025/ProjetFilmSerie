<div class="container py-5">
  <h1 class="text-center text-warning mb-5 display-4">Ajouter une série</h1>

  @if (!auth.isModeratorOrAdmin()) {
    <div class="text-center py-5 text-danger">
      <h2>Accès refusé – Modérateur requis</h2>
    </div>
  } @else {
    <div class="card max-w-5xl mx-auto p-5">

      <form [formGroup]="form" (ngSubmit)="submit()">

        <div class="grid-2 mb-5">
          <div>
            <label class="label">ID TMDB *</label>
            <div class="d-flex gap-3">
              <input formControlName="tmdbId" class="input-field" />
              <button type="button" (click)="fetchFromTmdb()" class="btn btn-outline">
                @if (loadingTmdb) { Chargement... } @else { TMDB }
              </button>
            </div>
          </div>
          <div>
            <label class="label">Nom de la série *</label>
            <input formControlName="name" class="input-field" />
          </div>
        </div>

        <div class="grid-2 mb-5">
          <div>
            <label class="label">Nom original</label>
            <input formControlName="originalName" class="input-field" />
          </div>
          <div>
            <label class="label">Première diffusion</label>
            <input type="date" formControlName="firstAirDate" class="input-field" />
          </div>
        </div>

        <div class="mb-5">
          <label class="label">Synopsis</label>
          <textarea formControlName="overview" rows="5" class="input-field"></textarea>
        </div>

        <div class="grid-3 mb-5">
          <div>
            <label class="label">Saisons</label>
            <input type="number" formControlName="numberOfSeasons" class="input-field" />
          </div>
          <div>
            <label class="label">Épisodes</label>
            <input type="number" formControlName="numberOfEpisodes" class="input-field" />
          </div>
          <div>
            <label class="label">Durée épisode (min)</label>
            <input type="number" formControlName="episodeRuntime" class="input-field" />
          </div>
        </div>

        <div class="grid-2 mb-5">
          <div>
            <label class="label">Affiche</label>
            <input formControlName="posterPath" class="input-field" />
          </div>
          <div>
            <label class="label">Backdrop</label>
            <input formControlName="backdropPath" class="input-field" />
          </div>
        </div>

        <div class="text-center">
          <button type="submit" class="btn btn-primary large">
            Ajouter la série
          </button>

          @if (success) {
            <div class="success-msg mt-4">Série ajoutée avec succès !</div>
          }
        </div>
      </form>
    </div>
  }
</div><div class="container py-5">
  <h1 class="text-center text-warning mb-5 display-4">Ajouter une série</h1>

  @if (!auth.isModeratorOrAdmin()) {
    <div class="text-center py-5 text-danger">
      <h2>Accès refusé – Modérateur requis</h2>
    </div>
  } @else {
    <div class="card max-w-5xl mx-auto p-5">

      <form [formGroup]="form" (ngSubmit)="submit()">

        <div class="grid-2 mb-5">
          <div>
            <label class="label">ID TMDB *</label>
            <div class="d-flex gap-3">
              <input formControlName="tmdbId" class="input-field" />
              <button type="button" (click)="fetchFromTmdb()" class="btn btn-outline">
                @if (loadingTmdb) { Chargement... } @else { TMDB }
              </button>
            </div>
          </div>
          <div>
            <label class="label">Nom de la série *</label>
            <input formControlName="name" class="input-field" />
          </div>
        </div>

        <div class="grid-2 mb-5">
          <div>
            <label class="label">Nom original</label>
            <input formControlName="originalName" class="input-field" />
          </div>
          <div>
            <label class="label">Première diffusion</label>
            <input type="date" formControlName="firstAirDate" class="input-field" />
          </div>
        </div>

        <div class="mb-5">
          <label class="label">Synopsis</label>
          <textarea formControlName="overview" rows="5" class="input-field"></textarea>
        </div>

        <div class="grid-3 mb-5">
          <div>
            <label class="label">Saisons</label>
            <input type="number" formControlName="numberOfSeasons" class="input-field" />
          </div>
          <div>
            <label class="label">Épisodes</label>
            <input type="number" formControlName="numberOfEpisodes" class="input-field" />
          </div>
          <div>
            <label class="label">Durée épisode (min)</label>
            <input type="number" formControlName="episodeRuntime" class="input-field" />
          </div>
        </div>

        <div class="grid-2 mb-5">
          <div>
            <label class="label">Affiche</label>
            <input formControlName="posterPath" class="input-field" />
          </div>
          <div>
            <label class="label">Backdrop</label>
            <input formControlName="backdropPath" class="input-field" />
          </div>
        </div>

        <div class="text-center">
          <button type="submit" class="btn btn-primary large">
            Ajouter la série
          </button>

          @if (success) {
            <div class="success-msg mt-4">Série ajoutée avec succès !</div>
          }
        </div>
      </form>
    </div>
  }
</div>
