<div class="container py-5">
  <h1 class="text-center text-warning mb-5 display-3">Recherche avancée</h1>

  <div class="search-box card p-5 mb-5">
    <form [formGroup]="searchForm">
      <div class="grid-3">
        <div>
          <label class="label">Rechercher</label>
          <input type="text" formControlName="query" placeholder="Titre, acteur, réalisateur..." class="input-field large" />
        </div>
        <div>
          <label class="label">Année</label>
          <input type="number" formControlName="year" placeholder="2024" class="input-field" />
        </div>
        <div>
          <label class="label">Genre</label>
          <select formControlName="genre" class="input-field">
            <option value="">Tous les genres</option>
            <option value="28">Action</option>
            <option value="12">Aventure</option>
            <option value="16">Animation</option>
            <option value="35">Comédie</option>
            <option value="80">Policier</option>
            <option value="18">Drame</option>
            <option value="27">Horreur</option>
            <option value="878">Science-fiction</option>
          </select>
        </div>
      </div>

      <div class="text-center mt-4">
        <button type="button" (click)="clear()" class="btn btn-outline">
          Effacer
        </button>
      </div>
    </form>
  </div>

  <div class="results">
    @if (results$ | async; as data) {
      @if (data.results.length) {
        <h2 class="text-light mb-4">
          {{ data.total_results }} résultat{{ data.total_results > 1 ? 's' : '' }}
        </h2>
        <div class="movies-grid">
          @for (movie of data.results; track movie.id) {
            <app-movie-card [movie]="movie" />
          }
        </div>
      } @else {
        <div class="text-center py-5">
          <p class="text-muted fs-3">Aucun résultat</p>
          <p>Essaie avec d'autres critères</p>
        </div>
      }
    } @else {
      <div class="text-center py-5 text-muted">
        <p class="fs-4">Commence ta recherche...</p>
      </div>
    }
  </div>
</div>
