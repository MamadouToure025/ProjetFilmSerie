<div class="auth-page">
  <div class="auth-card max-w-md mx-auto">

    <h1 class="auth-title text-center">Créer un compte</h1>

    @if (success) {
      <div class="success-box">
        Inscription réussie !
        Redirection vers la connexion dans 3 secondes...
      </div>
    } @else {
      <form [formGroup]="form" (ngSubmit)="register()">

        <div class="mb-4">
          <label class="label">Pseudo *</label>
          <input
            type="text"
            formControlName="username"
            placeholder="Jean Dupont"
            class="input-field" />
        </div>

        <div class="mb-4">
          <label class="label">Email *</label>
          <input
            type="email"
            formControlName="email"
            placeholder="jean@example.com"
            class="input-field" />
        </div>

        <div class="mb-4">
          <label class="label">Mot de passe * (6 caractères min)</label>
          <input
            type="password"
            formControlName="password"
            class="input-field" />
        </div>

        <div class="mb-5">
          <label class="label">Confirmer le mot de passe *</label>
          <input
            type="password"
            formControlName="confirmPassword"
            class="input-field" />
          @if (form.errors?.['mismatch'] && form.get('confirmPassword')?.touched) {
            <small class="text-danger">Les mots de passe ne correspondent pas</small>
          }
        </div>

        @if (error) {
          <div class="auth-error mb-4">{{ error }}</div>
        }

        <button
          type="submit"
          class="btn btn-primary w-100 large"
          [disabled]="form.invalid">
          S'inscrire
        </button>
      </form>
    }

    <p class="auth-link text-center mt-4">
      Déjà un compte ? <a routerLink="/login" class="text-warning">Se connecter</a>
    </p>

  </div>
</div>
